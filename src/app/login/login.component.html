<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>{{ 'COMMON.LOGIN' | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="ion-padding ion-text-center" style="max-width: 400px; margin: 0 auto;">
    <ion-card>
      <ion-card-header>
        <ion-card-title>{{ 'AUTH.LOGIN_TITLE' | translate }}</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <ion-item class="ion-margin-bottom">
          <ion-label position="stacked">{{ 'COMMON.EMAIL' | translate }}</ion-label>
          <ion-input type="email" [(ngModel)]="email" [placeholder]="'COMMON.EMAIL' | translate" autocomplete="off"></ion-input>
        </ion-item>

        <ion-item class="ion-margin-bottom">
          <ion-label position="stacked">{{ 'COMMON.PASSWORD' | translate }}</ion-label>
          <ion-input type="password" [(ngModel)]="password" [placeholder]="'COMMON.PASSWORD' | translate" autocomplete="new-password"></ion-input>
        </ion-item>

        <div class="ion-margin-top ion-margin-bottom">
          <ion-button expand="block" (click)="signIn()" [disabled]="loading()">
            @if (loading()) {
              <ion-spinner></ion-spinner>
            } @else {
              {{ 'COMMON.LOGIN' | translate }}
            }
          </ion-button>
        </div>

        <div class="divider">
          <span>{{ 'FORMS.OR' | translate }}</span>
        </div>

        <div class="ion-margin-bottom">
          <ion-button expand="block" fill="outline" (click)="signInWithGoogle()" [disabled]="googleLoading">
            @if (googleLoading) {
              <ion-spinner></ion-spinner>
            } @else {
              <ion-icon name="logo-google" slot="start"></ion-icon>
              {{ 'FORMS.CONTINUE_WITH_GOOGLE' | translate }}
            }
          </ion-button>
        </div>

        @if (error()) {
          <ion-text color="danger" class="ion-margin-top">
            <p>{{ error() }}</p>
            <ion-button fill="clear" size="small" (click)="clearError()">{{ 'COMMON.CLOSE' | translate }}</ion-button>
          </ion-text>
        }

        @if (user()) {
          <div>
            <ion-text color="success" class="ion-margin-top">
              <p>{{ 'AUTH.LOGIN_SUCCESS' | translate }}, {{ user()?.displayName || user()?.email }}!</p>
            </ion-text>
          </div>
        }

        <div class="ion-margin-top ion-text-center">
          <ion-text color="medium">
            <p>{{ 'AUTH.DONT_HAVE_ACCOUNT' | translate }} <ion-button fill="clear" size="small" routerLink="/register">{{ 'COMMON.REGISTER' | translate }}</ion-button></p>
          </ion-text>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
