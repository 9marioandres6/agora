<div class="posts-list-container">
  <div class="posts-header">
    <h1>Projects</h1>
    <button class="new-project-btn" (click)="onCreateNew()">
      <span class="new-project-icon">‚ûï</span>
      <span>New Project</span>
    </button>
  </div>

  <div class="posts-filters">
    <label for="scope-filter">Filter by Scope:</label>
          <select 
        id="scope-filter" 
        class="scope-select"
        #scopeSelect
        (change)="onScopeChange(scopeSelect.value)">
      @for (scope of scopes; track scope.value) {
        <option [value]="scope.value">
          @if (scope.value === '') {
            All Scopes
          } @else {
            {{ scope.label | translate }}
          }
        </option>
      }
    </select>
  </div>

  @if (loading()) {
    <div class="loading-container">
      <div class="loading-spinner"></div>
      <span>Loading projects...</span>
    </div>
  } @else if (error()) {
    <div class="error-container">
      <span class="error-message">{{ error() }}</span>
      <button class="retry-btn" (click)="loadPosts()">Retry</button>
    </div>
  } @else if (posts().length === 0) {
    <div class="empty-state">
      <span class="empty-icon">üìù</span>
      <h3>No projects yet</h3>
      <p>Be the first to create a project!</p>
      <button class="create-first-btn" (click)="onCreateNew()">
        Create Your First Project
      </button>
    </div>
  } @else {
    <div class="posts-grid">
      @for (post of posts(); track post.id) {
        <div class="post-card">
          <div class="post-header">
            <h3 class="post-title">{{ post.title }}</h3>
            <span class="post-scope">{{ post.scope | titlecase }}</span>
          </div>
          
          <p class="post-description">{{ post.description }}</p>
          
          @if (post.needed.length > 0) {
            <div class="post-needed">
              <h4>What's needed:</h4>
              <ul class="needed-list">
                @for (item of post.needed; track item) {
                  <li>{{ item }}</li>
                }
              </ul>
            </div>
          }
          
          <div class="post-footer">
            <div class="post-author">
              <span class="author-label">By:</span>
              <span class="author-name">{{ post.authorName }}</span>
            </div>
            <span class="post-date">{{ formatDate(post.createdAt) }}</span>
          </div>
        </div>
      }
    </div>
  }
</div>
