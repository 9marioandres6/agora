<div class="theme-toggle-container">
  @if (showDropdown()) {
    <div class="theme-dropdown-container">
      <button 
        class="theme-dropdown-btn"
        [attr.aria-expanded]="isDropdownOpen()"
        (click)="toggleDropdown()"
        type="button">
        <span class="theme-icon">{{ getThemeIcon(selectedTheme()) }}</span>
        <span>{{ getThemeLabel(selectedTheme()) }}</span>
        <span class="dropdown-arrow">▼</span>
      </button>
      
      @if (isDropdownOpen()) {
        <div class="dropdown-menu">
          @for (option of themeOptions; track option.value) {
            <button 
              class="dropdown-item"
              [class.active]="option.value === selectedTheme()"
              (click)="selectTheme(option.value)"
              type="button">
              <span class="theme-icon">{{ getThemeIcon(option.value) }}</span>
              <span>{{ option.label }}</span>
              @if (option.value === selectedTheme()) {
                <span class="check-icon">✓</span>
              }
            </button>
          }
        </div>
      }
    </div>
  } @else {
    <app-generic-switch 
      [(checked)]="isDarkMode"
      (change)="onToggleChange()"
      [onLabel]="'Dark'"
      [offLabel]="'Light'"
      [showLabels]="true"
      size="medium"
      class="theme-toggle-btn">
    </app-generic-switch>
  }
</div>
